# Server configuration
FASTIFY_PORT=3030

# ============================================================================
# AGENT CONFIGURATION
# ============================================================================
# Agent personality configuration is managed via JSON files in config/agents/
# 
# Current agent configs:
# - helpful-assistant.json
# - my-agent.json
# - autonomy-test-agent.json
# - template.json (example/reference only)
#
# To create a new agent:
# 1. Copy config/agents/template.json to config/agents/your-agent.json
# 2. Edit the JSON file with your settings (system prompt, model, API keys, etc.)
# 3. Generate a UUID for the 'id' field
# 4. Agent will be auto-discovered and selectable via UI
#
# See config/agents/template.json for the complete schema.
# ============================================================================

# ============================================================================
# INFRASTRUCTURE CONFIGURATION
# ============================================================================

# Postgres persistence (Phase 1.5)
POSTGRES_USER=cerebrobot
POSTGRES_PASSWORD=cerebrobot
POSTGRES_DB=cerebrobot
POSTGRES_PORT=5432
DATABASE_URL="postgresql://cerebrobot:cerebrobot@localhost:5432/cerebrobot"

# LangGraph Postgres checkpoint configuration
LANGGRAPH_PG_URL="postgresql://cerebrobot:cerebrobot@localhost:5432/cerebrobot"

# ============================================================================
# TEST INFRASTRUCTURE (SEPARATE from production)
# ============================================================================
# Postgres validation tests require a SEPARATE test database to prevent
# production data contamination. These should point to a different database
# than DATABASE_URL and LANGGRAPH_PG_URL.
#
# Setup:
#   1. Create test database: createdb cerebrobot_test
#   2. Apply migrations: DATABASE_URL=$DATABASE_URL_TEST pnpm prisma:migrate
#   3. Run tests: pnpm test
#
# The test suite will skip Postgres validation tests if these are not set.
DATABASE_URL_TEST="postgresql://cerebrobot:cerebrobot@localhost:5432/cerebrobot_test"
LANGGRAPH_PG_URL_TEST="postgresql://cerebrobot:cerebrobot@localhost:5432/cerebrobot_test"
# ============================================================================

# Frontend configuration
CLIENT_PORT=5173
VITE_API_BASE="http://localhost:3030"

# ============================================================================
# AUTONOMY CONFIGURATION (Spec 009)
# ============================================================================
# Enable server-side autonomous follow-ups and timer-based interactions
AUTONOMY_ENABLED=false

# PolicyGates enforcement (User Story 3)
# Maximum consecutive autonomous messages without user input
AUTONOMY_MAX_CONSECUTIVE=3

# Minimum cooldown between autonomous messages (milliseconds)
AUTONOMY_COOLDOWN_MS=15000

# Timer worker polling configuration
TIMER_POLL_INTERVAL_MS=5000
TIMER_POLL_LOOKBACK_MS=60000

# Effect runner polling configuration (for durable message delivery)
EFFECT_POLL_INTERVAL_MS=500
# ============================================================================
