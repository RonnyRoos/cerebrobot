/**
 * Chat-specific color tokens documentation: see chat-colors.css
 * Defines 12 semantic color tokens for light/dark themes with WCAG AA compliance
 */

@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  :root {
    /* Message Colors - Light Mode */
    --color-message-user-bg: 239 84% 67%; /* Soft blue */
    --color-message-user-text: 222 47% 11%; /* Dark text */
    --color-message-agent-bg: 240 5% 96%; /* Light gray */
    --color-message-agent-text: 222 47% 11%; /* Dark text */

    /* Code Block Colors - Light Mode */
    --color-code-block-bg: 0 0% 98%; /* Near-white */
    --color-code-block-border: 0 0% 89%; /* Light border */
    --color-code-inline-bg: 0 0% 95%; /* Inline code */

    /* Utility Colors - Light Mode */
    --color-timestamp: 240 4% 46%; /* Muted gray */
    --color-link: 221 83% 53%; /* Link blue */
    --color-link-hover: 221 83% 43%; /* Darker blue */
    --color-copy-button: 0 0% 60%; /* Gray */
    --color-copy-button-success: 142 71% 45%; /* Green */
  }

  .dark {
    /* Message Colors - Dark Mode (Neon Flux) */
    --color-message-user-bg: 277 92% 62%; /* Purple #a855f7 */
    --color-message-user-text: 240 5% 97%; /* Light text #f8fafc */
    --color-message-agent-bg: 221 91% 60%; /* Blue #3b82f6 */
    --color-message-agent-text: 240 5% 97%; /* Light text #f8fafc */

    /* Code Block Colors - Dark Mode (Neon Flux) */
    --color-code-block-bg: 240 20% 5%; /* Dark bg #0a0a0f */
    --color-code-block-border: 277 92% 62%; /* Purple border #a855f7 */
    --color-code-inline-bg: 240 21% 15%; /* Dark #1e1e2e */

    /* Utility Colors - Dark Mode (Neon Flux) */
    --color-timestamp: 215 16% 47%; /* Muted #64748b */
    --color-link: 187 95% 43%; /* Cyan #06b6d4 */
    --color-link-hover: 187 95% 53%; /* Brighter cyan */
    --color-copy-button: 277 92% 62%; /* Purple #a855f7 */
    --color-copy-button-success: 142 71% 55%; /* Green (keep) */
  }

  /* Prevent transitions during theme switch to avoid flash */
  .theme-switching * {
    transition: none !important;
  }
}

@layer components {
  /* Chat typography optimizations */
  .prose-chat {
    @apply text-chat-body;
    max-width: 65ch;
  }

  .prose-chat h1 {
    @apply text-2xl font-bold leading-tight mb-3;
  }

  .prose-chat h2 {
    @apply text-xl font-semibold leading-snug mb-2;
  }

  .prose-chat h3 {
    @apply text-lg font-semibold leading-normal mb-2;
  }

  .prose-chat h4 {
    @apply text-base font-semibold leading-normal mb-2;
  }

  .prose-chat code {
    @apply font-mono text-chat-code-inline bg-code-inline-bg px-1 py-0.5 rounded;
  }

  .prose-chat pre {
    @apply bg-code-block-bg border border-code-block-border rounded-lg p-4 overflow-x-auto;
  }

  .prose-chat pre code {
    @apply bg-transparent p-0 text-chat-code;
  }

  .prose-chat a {
    @apply text-link hover:text-link-hover underline;
  }

  /* Typing indicator animations (Neon Flux - glowing dots) */
  .typing-dot {
    @apply w-2 h-2 rounded-full;
    background: hsl(221, 91%, 60%); /* Blue #3b82f6 */
    box-shadow: 0 0 10px hsl(221, 91%, 60%);
    animation: typing-glow 1.4s ease-in-out infinite;
  }

  .typing-dot-delay-1 {
    animation-delay: 0.2s;
  }

  .typing-dot-delay-2 {
    animation-delay: 0.4s;
  }

  .typing-pulse {
    @apply w-3 h-3 rounded-full;
    background: hsl(221, 91%, 60%);
    box-shadow: 0 0 12px hsl(221, 91%, 60%);
    animation: typing-pulse 1.5s ease-in-out infinite;
  }

  @keyframes typing-glow {
    0%,
    60%,
    100% {
      transform: translateY(0);
      opacity: 0.7;
    }
    30% {
      transform: translateY(-10px);
      opacity: 1;
    }
  }

  @keyframes typing-pulse {
    0%,
    100% {
      transform: scale(1);
      opacity: 0.6;
    }
    50% {
      transform: scale(1.3);
      opacity: 0.3;
    }
  }
}
