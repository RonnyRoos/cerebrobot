---
description: Execute the feature tasks inside docs/specs/<NNN>-<slug>/ using Codex workflows.
---

The user input can be provided directly by the agent or as a command argument—you **MUST** consider it before proceeding (if not empty).

User input:

$ARGUMENTS

## Goal
Carry out all tasks listed in `tasks.md`, respecting dependencies, hygiene expectations, and plan guidance, while marking progress directly within the task list.

## Preconditions
- `featureDir` exists with `spec.md`, `plan.md`, and `tasks.md` generated by Codex prompts.
- Repository worktree may be dirty; never revert unrelated changes.

## Execution Steps
1. **Preparation**
   - Resolve `featureDir`; load `tasks.md`, `plan.md`, and relevant supporting artefacts (`data-model.md`, `contracts/`, `quickstart.md`).
   - Build an ordered queue of tasks grouped by phase (Setup, Tests, Core, Integration, Polish) and dependency markers.
2. **Execution Rules**
   - Respect sequential dependencies; only run `[P]` tasks in parallel when they touch disjoint files.
   - Adopt TDD: implement test tasks before the related code tasks.
   - After completing any significant code change, run the hygiene loop:
     1. `pnpm lint`
     2. `pnpm format:write`
     3. `pnpm test`
   - If any command fails, stop immediately, surface the failure, and provide remediation guidance before retrying.
3. **Task Handling**
   - For each task:
     - Explain the plan of attack referencing relevant files.
     - Perform necessary edits/tests.
     - Mark the corresponding line in `tasks.md` as `[X]` upon completion; leave failures unchecked with notes.
     - Summarise outcomes and any follow-on steps.
4. **Parallel Tasks**
   - When `[P]` tasks exist, clarify execution order, noting concurrency assumptions and shared prerequisites.
5. **Progress Tracking**
   - Report status after each task or batch (for parallel groups).
   - Maintain a running summary of outstanding tasks.
6. **Completion Validation**
   - Confirm all tasks are marked `[X]`.
   - Verify that implementation aligns with `plan.md` and `spec.md` (spot-check key requirements and tests).
   - Ensure the final hygiene loop succeeds.
7. **Final Report**
   - Provide a concise summary of work completed, mention any follow-up TODOs or refactors, and list commands/tests executed.

## Behavioural Rules
- Modify only files relevant to the current task; never revert or overwrite unrelated user changes.
- Use repository paths in all references (e.g., `src/...`).
- Keep explanations succinct but clear for operator review.

## Error Handling
- Missing tasks or plan → halt with instructions to run preceding prompts.
- Hygiene command failure → stop, detail failure output, and recommend fixes.

Completion criteria: every task in `tasks.md` is addressed, progress is marked, hygiene loop passes, and the operator receives a final status report.
